(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{5458:function(e,a,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account",function(){return r(6393)}])},6393:function(e,a,r){"use strict";r.r(a);var s=r(5893),n=r(7294),t=r(3299);a.default=()=>{let{data:e}=(0,t.useSession)(),[a,r]=(0,n.useState)(""),[o,l]=(0,n.useState)(""),[i,d]=(0,n.useState)(""),[c,u]=(0,n.useState)(""),[h,p]=(0,n.useState)("");(0,n.useEffect)(()=>{var a;(null==e?void 0:null===(a=e.user)||void 0===a?void 0:a.id)?(console.log("Session User ID:",e.user.id),m(e.user.id)):console.error("Session does not contain a user ID.")},[e]);let m=async e=>{try{let a=await fetch("http://localhost:3001/api/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"\n            query GetUser($where: UserWhereUniqueInput!) {\n              user(where: $where) {\n                id\n                name\n                email\n              }\n            }\n          ",variables:{where:{id:e}}})}),s=await a.json();console.log("GraphQL response:",s),s.data&&s.data.user?(r(s.data.user.name),l(s.data.user.email)):(console.error("GraphQL errors:",s.errors),p("Error fetching user data. Please check the console for details."))}catch(e){console.error("Error fetching user data:",e),p("An error occurred while fetching user data.")}},g=async r=>{r.preventDefault();try{let r=await fetch("http://localhost:3001/api/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"\n            mutation UpdateUser($where: UserWhereUniqueInput!, $data: UserUpdateInput!) {\n                updateUser(where: $where, data: $data) {\n                    id\n                    name\n                    email\n                    }\n                }\n            ",variables:{where:{id:e.user.id},data:{name:a,email:o}}})}),s=await r.json();console.log("GraphQL response:",s),s.errors?p("Error updating profile. Please try again."):p("Profile updated successfully!")}catch(e){console.error("Error updating profile:",e),p("An error occurred. Please try again.")}},b=async a=>{a.preventDefault();try{let a=await fetch("http://localhost:3001/api/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"\n        mutation UpdateUser($id: ID!, $password: String!) {\n          updateUser(where: { id: $id }, data: { password: $password }) {\n            id\n          }\n        }\n      ",variables:{id:e.user.id,password:c}})});(await a.json()).errors?p("Error changing password. Please try again."):p("Password changed successfully!")}catch(e){console.error("Error changing password:",e),p("An error occurred. Please try again.")}};return e?(0,s.jsxs)("div",{className:"container mx-auto p-6",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-8 text-center",children:"Manage Your Account"}),h&&(0,s.jsx)("p",{className:"text-center text-green-500 mb-4",children:h}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg mb-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Your Profile"}),(0,s.jsxs)("form",{onSubmit:g,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 mb-2",children:"Name"}),(0,s.jsx)("input",{type:"text",value:a,onChange:e=>r(e.target.value),className:"w-full p-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-600",placeholder:"Your name"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 mb-2",children:"Email"}),(0,s.jsx)("input",{type:"email",value:o,onChange:e=>l(e.target.value),className:"w-full p-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-600",placeholder:"Your email"})]}),(0,s.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition duration-300",children:"Update Profile"})]})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg mb-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Change Password"}),(0,s.jsxs)("form",{onSubmit:b,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 mb-2",children:"Current Password"}),(0,s.jsx)("input",{type:"password",value:i,onChange:e=>d(e.target.value),className:"w-full p-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-600",placeholder:"Enter current password"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 mb-2",children:"New Password"}),(0,s.jsx)("input",{type:"password",value:c,onChange:e=>u(e.target.value),className:"w-full p-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-600",placeholder:"Enter new password"})]}),(0,s.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition duration-300",children:"Change Password"})]})]})]}):(0,s.jsx)("div",{className:"container mx-auto p-6",children:(0,s.jsx)("p",{className:"text-center text-lg",children:"Please log in to manage your account."})})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=5458)}),_N_E=e.O()}]);